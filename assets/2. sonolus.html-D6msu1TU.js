import{_ as o,c as a,e as t,o as n}from"./app-DJxIiaC4.js";const s={};function c(d,e){return n(),a("div",null,e[0]||(e[0]=[t('<h1 id="sonolus-基础" tabindex="-1"><a class="header-anchor" href="#sonolus-基础"><span>Sonolus 基础</span></a></h1><p>在本章中，您将会学习到:</p><ul><li>Sonolus 引擎的基本概念</li></ul><h2 id="原型与实体" tabindex="-1"><a class="header-anchor" href="#原型与实体"><span>原型与实体</span></a></h2><div class="hint-container warning"><p class="hint-container-title">注意</p><p>本段内容不适用于教程模式。</p></div><p>原型是一种实体的抽象概念，由引擎数据定义。在 Sonolus.h 中，您需要使用 <code>Archetype</code> 类的继承类来定义一种原型。</p><p>实体是一种原型的示例，由关卡数据定义。在 Sonolus.h 中，您可以通过 <code>LevelData.h</code> 中的 API 简易地生成包含多个实体的关卡数据。</p><p>在关卡初始化阶段，Sonolus 会遍历关卡数据中的实体。对于每个实体，会根据其指定的原型名生成对应原型的示例。</p><p>单个原型是由多个回调函数及其对应的调用顺序构成的，具体调用细节视游玩模式不同而不同。一般来说，在关卡初始化阶段，会调用每个实体的 <code>preprocess</code> 或其他回调函数，随后在游戏进行时的每一帧，会以特定的顺序与时机调用剩余回调函数。</p><p>回调函数调用顺序(<code>*Order</code>)是一个编译期常量，不可在引擎运行过程中修改。它决定了该回调函数在不同原型中的调用顺序。该值越小，意味着该原型中的该回调函数在同一执行周期中会更早执行，反之会更晚执行。</p><h2 id="游戏帧-更新周期" tabindex="-1"><a class="header-anchor" href="#游戏帧-更新周期"><span>游戏帧/更新周期</span></a></h2><div class="hint-container warning"><p class="hint-container-title">注意</p><p>本段内容不适用于预览模式。</p></div><p>Sonolus 将每一帧作为一个更新周期。在该更新周期中，会以特定顺序彻底调用一遍未在初始化过程执行的回调函数。</p><p>开发者在每一更新周期<strong>都需要</strong>调用 <code>Draw</code> 函数绘制相关图形，否则该更新周期绘制的图形将在下一更新周期被清除。</p><p>开发者<strong>不需要</strong>在每一更新周期都调用 <code>Play</code>/<code>SpawnEffect</code> 函数播放音效和特效，只需要在合适的时机调用一次即可，Sonolus 不会清除上一更新周期播放的音效和特效。</p><h2 id="数据存储" tabindex="-1"><a class="header-anchor" href="#数据存储"><span>数据存储</span></a></h2><p>在 Sonolus.h 中，数据均存储在多个由一段简单的连续内存组成的区块内。</p><p>一般来说，所有回调函数具有对所有区块的读取权限，但只有部分回调函数具有对部分区块的写入权限。</p><p>通过 Sonolus.h 提供的低级函数，您可以简单地访问这些内存块。例如您可以通过 <code>Get(blockId, offset)</code> 函数获取 id 为 <code>blockId</code> 的区块上偏移为 <code>offset</code> 的变量，同时可以通过 <code>Set(blockId, offset, value)</code> 函数将 id 为 <code>blockId</code> 的区块上偏移为 <code>offset</code> 的变量设置为 <code>value</code>。</p><p>Sonolus.h 抽象化了这些低级操作并将其转化为了对开发者友好的 API。</p><p>部分区块的值可在游戏暂停时的菜单中查看(需要在设置中开启调试模式)。</p><p>针对于已激活实体的区块的值可在游戏暂停时的 <code>Active Entities</code> 中找到相关实体查看(需要在设置中开启调试模式)。</p>',22)]))}const p=o(s,[["render",c]]),i=JSON.parse('{"path":"/sonolus.h/basic/2.%20sonolus.html","title":"Sonolus 基础","lang":"zh-CN","frontmatter":{},"git":{"updatedTime":1745078694000,"contributors":[{"name":"LittleYang0531","username":"LittleYang0531","email":"littleyang0531@cau.edu.cn","commits":2,"url":"https://github.com/LittleYang0531"}],"changelog":[{"hash":"cf41bee41753afa07d0ab3cd62644a45489fffce","time":1745078694000,"email":"littleyang0531@cau.edu.cn","author":"LittleYang0531","message":"Update"},{"hash":"3b1b3ba269e86d6d9e8b0d2a714f42d2326eb40c","time":1745073187000,"email":"littleyang0531@cau.edu.cn","author":"LittleYang0531","message":"Update"}]},"filePathRelative":"sonolus.h/basic/2. sonolus.md"}');export{p as comp,i as data};

# Sonolus 基础

在本章中，您将会学习到:

- Sonolus 引擎的基本概念

## 原型与实体

:::warning

本段内容不适用于教程模式。

:::

原型是一种实体的抽象概念，由引擎数据定义。在 Sonolus.h 中，您需要使用 `Archetype` 类的继承类来定义一种原型。

实体是一种原型的示例，由关卡数据定义。在 Sonolus.h 中，您可以通过 `LevelData.h` 中的 API 简易地生成包含多个实体的关卡数据。

在关卡初始化阶段，Sonolus 会遍历关卡数据中的实体。对于每个实体，会根据其指定的原型名生成对应原型的示例。

单个原型是由多个回调函数构成的，具体调用细节视游玩模式不同而不同。一般来说，在关卡初始化阶段，会调用每个实体的 `preprocess` 或其他回调函数，随后在游戏进行时，会以特定的顺序与时机调用剩余回调函数。

## 数据存储

在 Sonolus.h 中，数据均存储在多个由一段简单的连续内存组成的区块内。

通过 Sonolus.h 提供的低级函数，您可以简单地访问这些内存块。例如您可以通过 `Get(blockId, offset)` 函数获取 id 为 `blockId` 的区块上偏移为 `offset` 的变量，同时可以通过 `Set(blockId, offset, value)` 函数将 id 为 `blockId` 的区块上偏移为 `offset` 的变量设置为 `value`。

Sonolus.h 抽象化了这些低级操作并将其转化为了对开发者友好的 API。